(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{457:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"ros文件系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ros文件系统"}},[s._v("#")]),s._v(" ROS文件系统")]),s._v(" "),a("ul",[a("li",[s._v("软件包"),a("br"),s._v("\n包是ROS代码的软件组织单元，每个软件包都可以包含程序库、可执行文件、脚本或其他构件。")]),s._v(" "),a("li",[s._v("Manifests"),a("br"),s._v("\n清单（Manifest）是对软件包的描述。它用于定义软件包之间的依赖关系，并记录有关软件包的元信息，如版本、维护者、许可证等。")]),s._v(" "),a("li",[s._v("内置命令工具\n"),a("ul",[a("li",[s._v("rospack\n获取软件包的所在路径 "),a("code",[s._v("rospack find [package_name]")])]),s._v(" "),a("li",[s._v("roscd\n"),a("ul",[a("li",[s._v("切换目录到软件包或者软件包集 "),a("code",[s._v("roscd [locationname[/subdir]]")])]),s._v(" "),a("li",[s._v("进入日志文件目录 "),a("code",[s._v("roscd log")])])])])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("就像ROS中的其它工具一样，roscd只能切换到那些路径已经包含在ROS_PACKAGE_PATH环境变量中的软件包，可以通过 "),a("code",[s._v("$ echo $ROS_PACKAGE_PATH")]),s._v(" 查看ROS_PACKAGE_PATH环境变量中包含的路径")])]),a("ul",[a("li",[s._v("rosls\n直接按软件包的名称执行ls命令 "),a("code",[s._v("rosls [locationname[/subdir]]")])]),s._v(" "),a("li",[s._v("TAB补全\n"),a("ul",[a("li",[s._v("使用TAB键可以补全较长的软件包名称")]),s._v(" "),a("li",[s._v("查看当前安装的所有软件包 "),a("code",[s._v("rosls 双击TAB")])])])])])])]),s._v(" "),a("h2",{attrs:{id:"创建ros软件包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建ros软件包"}},[s._v("#")]),s._v(" 创建ROS软件包")]),s._v(" "),a("ul",[a("li",[s._v("catkin软件包的组成\n"),a("ul",[a("li",[s._v("一个符合catkin规范的package.xml文件")]),s._v(" "),a("li",[s._v("一个catkin版本的CMakeLists.txt文件")]),s._v(" "),a("li",[s._v("每个包必须有自己的目录")])])]),s._v(" "),a("li",[s._v("开发方法：推荐使用catkin工作空间")]),s._v(" "),a("li",[s._v("创建catkin软件包"),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、创建一个新的catkin软件包\ncatkin_create_pkg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("package_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("depend1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("depend2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("depend3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、在catkin工作区中构建软件包\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/catkin_ws\ncatkin_make\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、要将这个工作空间添加到ROS环境中，你需要source一下生成的配置文件\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/catkin_ws/devel/setup.bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[s._v("软件包的依赖关系"),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/catkin_ws/src\n// std_msgs rospy roscpp 即为beginner_tutorials的一级依赖\ncatkin_create_pkg beginner_tutorials std_msgs rospy roscpp\n// 查看一级依赖\nrospack depends1 beginner_tutorials\n// 查看间接依赖\nrospack depends1 rospy\n// 查看所有依赖\nrospack depends beginner_tutorials\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"构建ros软件包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建ros软件包"}},[s._v("#")]),s._v(" 构建ROS软件包")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/catkin_ws\n// 构建src目录下的所有catkin项目\ncatkin_make\n// 构建my_src目录下的所有catkin项目\ncatkin_make "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--source")]),s._v(" my_src\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"理解ros节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解ros节点"}},[s._v("#")]),s._v(" 理解ROS节点")]),s._v(" "),a("p",[s._v("计算图（Computation Graph）是一个由ROS进程组成的点对点网络，它们能够共同处理数据。ROS的基本计算图概念有节点（Nodes）、主节点（Master）、参数服务器（Parameter Server）、消息（Messages）、服务（Services）、话题（Topics）和袋（Bags），它们都以不同的方式向图（Graph）提供数据。")]),s._v(" "),a("ul",[a("li",[s._v("节点（Nodes）\n"),a("ul",[a("li",[s._v("节点是一个ROS软件包中的可执行文件")]),s._v(" "),a("li",[s._v("节点使用ROS客户端库与其他节点通信")]),s._v(" "),a("li",[s._v("节点可以发布或订阅话题")]),s._v(" "),a("li",[s._v("节点可以提供或使用服务")])])]),s._v(" "),a("li",[s._v("消息（Messages）：订阅或发布话题时所使用的ROS数据类型")]),s._v(" "),a("li",[s._v("话题（Topics）：节点可以将消息发布到话题，或通过订阅话题来接收消息")]),s._v(" "),a("li",[s._v("主节点（Master）：ROS的命名服务，例如帮助节点发现彼此")]),s._v(" "),a("li",[s._v("客户端库\n"),a("ul",[a("li",[s._v("ROS客户端库可以让用不同编程语言编写的节点进行相互通信")]),s._v(" "),a("li",[s._v("rospy = Python客户端库")]),s._v(" "),a("li",[s._v("roscpp = C++客户端库")])])]),s._v(" "),a("li",[s._v("rosout：在ROS中相当于stdout/stderr（标准输出/标准错误）")]),s._v(" "),a("li",[s._v("roscore\n"),a("ul",[a("li",[s._v("主节点 + rosout + 参数服务器")]),s._v(" "),a("li",[a("code",[s._v("roscore")]),s._v(" 在运行所有ROS程序前首先要运行的命令")])])]),s._v(" "),a("li",[s._v("rosnode\n"),a("ul",[a("li",[a("code",[s._v("rosnode list")]),s._v(" 列出当前活动的节点")]),s._v(" "),a("li",[a("code",[s._v("rosnode info")]),s._v(" 返回某个指定节点的信息")]),s._v(" "),a("li",[a("code",[s._v("rosnode ping [node_name]")]),s._v(" 测试某个节点是否正常")])])]),s._v(" "),a("li",[s._v("rosrun\n"),a("ul",[a("li",[a("code",[s._v("rosrun [package_name] [node_name]")]),s._v(" 可以直接用包名运行软件包内的节点")]),s._v(" "),a("li",[a("code",[s._v("rosrun [package_name] [node_name] __name:=my_name")]),s._v(" 使用重映射参数来改变节点名称")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("rosrun turtlesim turtlesim_node\nrosnode list\n  /rosout\n  /turtlesim   \nrosrun turtlesim turtlesim_node __name:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("my_turtle\nrosnode list\n  /rosout\n  /my_turtle \nrosnode "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" my_turtle\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"理解ros话题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解ros话题"}},[s._v("#")]),s._v(" 理解ROS话题")]),s._v(" "),a("p",[s._v("节点之间是通过ROS话题来相互通信的")]),s._v(" "),a("ul",[a("li",[s._v("用动态的图显示系统中相互通信的节点 "),a("code",[s._v("rosrun rqt_graph rqt_graph")])]),s._v(" "),a("li",[s._v("在滚动时间图上显示发布到某个话题上的数据 "),a("code",[s._v("rosrun rqt_plot rqt_plot")])]),s._v(" "),a("li",[a("code",[s._v("rostopic")]),s._v(" 命令工具\n"),a("ul",[a("li",[s._v("显示发布在某个话题上的数据 "),a("code",[s._v("rostopic echo [topic]")])]),s._v(" "),a("li",[s._v("列出当前已被订阅和发布的所有话题 "),a("code",[s._v("rostopic list -b/-v/-p/-s/-h")])]),s._v(" "),a("li",[s._v("话题的通信是通过节点间发送ROS消息实现的\n"),a("ul",[a("li",[s._v("查看所发布话题的消息类型 "),a("code",[s._v("rostopic type [topic]")])]),s._v(" "),a("li",[s._v("查看消息的详细消息 "),a("code",[s._v("rosmsg show [msg_type]")])]),s._v(" "),a("li",[s._v("结合 "),a("code",[s._v("rostopic type [topic] | rosmsg show")])])])]),s._v(" "),a("li",[a("code",[s._v("rostopic pub")]),s._v(" 可以把数据发布到当前某个正在广播的话题上\n"),a("ul",[a("li",[a("code",[s._v("rostopic pub [topic] [msg_type] [args]")])]),s._v(" "),a("li",[s._v("使用 "),a("code",[s._v("rostopic pub -r")]),s._v(" 可以发布源源不断的命令")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("// -1代表只发布一条消息然后退出 --用来告诉选项解析器之后的参数都不是选项\nrostopic pub "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-1")]),s._v(" /turtle1/cmd_vel geometry_msgs/Twist -- "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[2.0, 0.0, 0.0]'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[0.0, 0.0, 1.8]'")]),s._v("\n// "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("代表发布的频率为1HZ\nrostopic pub /turtle1/cmd_vel geometry_msgs/Twist "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -- "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[2.0, 0.0, 0.0]'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[0.0, 0.0, -1.8]'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[s._v("报告数据发布的速率 "),a("code",[s._v("rostopic hz [topic]")])])])])]),s._v(" "),a("h2",{attrs:{id:"理解ros服务和参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解ros服务和参数"}},[s._v("#")]),s._v(" 理解ROS服务和参数")]),s._v(" "),a("p",[s._v("ROS服务是节点之间通讯的另一种方式，服务允许节点发送一个请求（request）并获得一个响应（response）")]),s._v(" "),a("ul",[a("li",[s._v("rosservice\n"),a("ul",[a("li",[a("code",[s._v("rosservice list")]),s._v(" 输出活跃服务的信息")]),s._v(" "),a("li",[a("code",[s._v("rosservice type [service]")]),s._v(" 输出服务的类型")]),s._v(" "),a("li",[a("code",[s._v("rosservice call [service] [args]")]),s._v(" 调用指定服务"),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("// 无参数的调用\nrosservice call /clear\n// 有参数的调用\nrosservice "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" /spawn "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rossrv show\n  float32 x\n  float32 y\n  float32 theta\n  string name\n  ---\n  string name\nrosservice call /spawn "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  name: turtle2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])])]),s._v(" "),a("li",[a("code",[s._v("rosservice find")]),s._v(" 按服务的类型查找服务")]),s._v(" "),a("li",[a("code",[s._v("rosservice uri")]),s._v(" 输出服务的ROSRPC uri")])])]),s._v(" "),a("li",[s._v("rosparam\n"),a("ul",[a("li",[s._v("rosparam可以在ROS参数服务器（Parameter Server）上存储和操作数据")]),s._v(" "),a("li",[s._v("参数服务器能够存储整型（integer）、浮点（float）、布尔（boolean）、字典（dictionaries）和列表（list）等数据类型")]),s._v(" "),a("li",[s._v("rosparam使用YAML标记语言的语法")]),s._v(" "),a("li",[a("code",[s._v("rosparam list")]),s._v(" 列出参数名")]),s._v(" "),a("li",[a("code",[s._v("rosparam set [param_name] [arg]")]),s._v(" 设置参数")]),s._v(" "),a("li",[a("code",[s._v("rosparam get [param_name]")]),s._v(" 获取参数")]),s._v(" "),a("li",[a("code",[s._v("rosparam get /")]),s._v(" 显示参数服务器上的所有内容")]),s._v(" "),a("li",[a("code",[s._v("rosparam delete")]),s._v(" 删除参数")]),s._v(" "),a("li",[a("code",[s._v("rosparam dump [file_name] [namespace]")]),s._v(" 向文件中转储参数")]),s._v(" "),a("li",[a("code",[s._v("rosparam load [file_name] [namespace]")]),s._v(" 从文件中加载参数")])])])]),s._v(" "),a("h2",{attrs:{id:"使用rqt-console和roslaunch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用rqt-console和roslaunch"}},[s._v("#")]),s._v(" 使用rqt_console和roslaunch")]),s._v(" "),a("ul",[a("li",[s._v("rqt_console连接到了ROS的日志框架，以显示节点的输出信息\n"),a("code",[s._v("rosrun rqt_console rqt_console")])]),s._v(" "),a("li",[s._v("rqt_logger_level允许我们在节点运行时改变输出信息的详细级别，包括Debug、Info、Warn和Error\n"),a("code",[s._v("rosrun rqt_logger_level rqt_logger_level")]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("日志记录器级别从高到低为Fatal Error Warn Info Debug"),a("br"),s._v("\n通过设置日志级别可以获得所有优先级级别，或只是更高级别的消息")])])]),s._v(" "),a("li",[s._v("roslaunch可以用来启动定义在launch（启动）文件中的节点\n"),a("ul",[a("li",[a("code",[s._v("roslaunch [package] [filename.launch]")])]),s._v(" "),a("li",[s._v("Example")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/catkin_ws\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" devel/setup.bash\nroscd beginner_tutorials\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" launch\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" launch\n// 创建launch文件\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" turtlemimic.launch\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),s._v("turtlemimic.launch"),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("launch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 创建了两个分组，并以命名空间（namespace）标签来区分 --\x3e")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 两个分组中都有相同的名为sim的turtlesim节点。这样可以让我们同时启动两个turtlesim模拟器，而不会产生命名冲突 --\x3e")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- turtulesim1 --\x3e")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("group")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ns")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("turtlesim1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("node")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("pkg")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("turtlesim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("sim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("turtlesim_node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- turtulesim2 --\x3e")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("group")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ns")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("turtlesim2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("node")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("pkg")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("turtlesim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("sim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("turtlesim_node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 模仿节点 --\x3e")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("node")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("pkg")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("turtlesim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("mimic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("mimic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("remap")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("from")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("to")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("turtlesim1/turtle1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("remap")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("from")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("to")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("turtlesim2/turtle1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("node")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("launch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),s._v("然后通过roslaunch来运行lanunch文件"),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("// 运行launch文件\nroslaunch beginner_tutorials turtlemimic.launch\n// 发布命令给turtlesim1\nrostopic pub /turtlesim1/turtle1/cmd_vel geometry_msgs/Twist "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -- "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[2.0, 0.0, 0.0]'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[0.0, 0.0, -1.8]'")]),s._v("\n// /turtlesim1/sim "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mimic "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  /turtlesim2/sim\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"使用rosed在ros中编辑文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用rosed在ros中编辑文件"}},[s._v("#")]),s._v(" 使用rosed在ROS中编辑文件")]),s._v(" "),a("p",[s._v("rosed是rosbash套件的一部分。利用它可以直接通过软件包名编辑包中的文件，而无需键入完整路径。")]),s._v(" "),a("ul",[a("li",[s._v("用法："),a("code",[s._v("rosed [package_name] [filename]")])]),s._v(" "),a("li",[s._v("示例："),a("code",[s._v("rosed roscpp Logger.msg")])]),s._v(" "),a("li",[s._v("查看包中所有文件 "),a("code",[s._v("rosed [package_name] <tab><tab>")])])]),s._v(" "),a("h2",{attrs:{id:"创建ros消息和服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建ros消息和服务"}},[s._v("#")]),s._v(" 创建ROS消息和服务")]),s._v(" "),a("h3",{attrs:{id:"msg和srv介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#msg和srv介绍"}},[s._v("#")]),s._v(" msg和srv介绍")]),s._v(" "),a("ul",[a("li",[s._v("msg（消息）\n"),a("ul",[a("li",[s._v("msg文件就是文本文件，用于描述ROS消息的字段")]),s._v(" "),a("li",[s._v("msg文件用于为不同编程语言编写的消息生成源代码")]),s._v(" "),a("li",[s._v("msg文件存放在软件包的msg目录下")]),s._v(" "),a("li",[s._v("msg文件每行都有一个字段类型和字段名称")]),s._v(" "),a("li",[s._v("msg可使用的类型有\n"),a("ul",[a("li",[s._v("int8, int16, int32, int64 (以及 uint*)")]),s._v(" "),a("li",[s._v("float32, float64")]),s._v(" "),a("li",[s._v("string")]),s._v(" "),a("li",[s._v("time, duration")]),s._v(" "),a("li",[s._v("其他msg文件")]),s._v(" "),a("li",[s._v("variable-length array[] 和 fixed-length array[C]")]),s._v(" "),a("li",[s._v("特殊的数据类型：Header (含有时间戳和ROS中广泛使用的坐标帧信息)")])])]),s._v(" "),a("li",[s._v("Example"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Header header\nstring child_frame_id\ngeometry_msgs/PoseWithCovariance pose\ngeometry_msgs/TwistWithCovariance twist\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])])]),s._v(" "),a("li",[s._v("srv（服务）\n"),a("ul",[a("li",[s._v("一个srv文件描述一个服务")]),s._v(" "),a("li",[s._v("srv文件由请求（request）和响应（response）组成，这两部分用一条---线隔开")]),s._v(" "),a("li",[s._v("srv文件存放在srv目录下")]),s._v(" "),a("li",[s._v("Example (A和B是请求, Sum是响应)"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("int64 A\nint64 B\n---\nint64 Sum\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])])])]),s._v(" "),a("h3",{attrs:{id:"msg和srv的创建和使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#msg和srv的创建和使用"}},[s._v("#")]),s._v(" msg和srv的创建和使用")]),s._v(" "),a("ul",[a("li",[s._v("创建msg"),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("roscd beginner_tutorials\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" msg\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"int64 num"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" msg/Num.msg\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),s._v("添加依赖到package.xml"),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("build_depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("message_generation"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("build_depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("exec_depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("message_runtime"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("exec_depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),s._v("修改CMakeLists.txt"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 1.为已经存在里面的find_package调用添加message_generation依赖项\nfind_package(catkin REQUIRED COMPONENTS\n  roscpp\n  rospy\n  std_msgs\n  message_generation\n)\n// 2.确保导出消息的运行时依赖关系\ncatkin_package(\n  ...\n  CATKIN_DEPENDS message_runtime\n  ...\n)\n// 3.手动添加.msg文件\nadd_message_files(\n  FILES\n  Num.msg\n)\n// 4.确保generate_messages()函数被调用\ngenerate_messages(\n  DEPENDENCIES\n  std_msgs\n)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])])]),s._v(" "),a("li",[s._v("使用rosmsg\n"),a("ul",[a("li",[s._v("用法 "),a("code",[s._v("rosmsg show [message type]")])]),s._v(" "),a("li",[s._v("Example"),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("// 带包名\nrosmsg show beginner_tutorials/Num\n// 不带报名\nrosmsg show Num\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])])]),s._v(" "),a("li",[s._v("创建srv"),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("roscd beginner_tutorials\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" srv\nroscp rospy_tutorials AddTwoInts.srv srv/AddTwoInts.srv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),s._v("注：roscp用于将文件从一个包复制到另一个包 "),a("code",[s._v("roscp [package_name] [file_to_copy_path] [copy_path]")]),a("br"),s._v("\n添加依赖到package.xml"),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("build_depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("message_generation"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("build_depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("exec_depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("message_runtime"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("exec_depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),s._v("修改CMakeLists.txt"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 1.为已经存在里面的find_package调用添加message_generation依赖项\nfind_package(catkin REQUIRED COMPONENTS\n  roscpp\n  rospy\n  std_msgs\n  message_generation\n)\n// 2.确保导出消息的运行时依赖关系\ncatkin_package(\n  ...\n  CATKIN_DEPENDS message_runtime\n  ...\n)\n// 3.手动添加.srv文件\nadd_service_files(\n  FILES\n  AddTwoInts.srv\n)\n// 4.确保generate_messages()函数被调用\ngenerate_messages(\n  DEPENDENCIES\n  std_msgs\n)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])])]),s._v(" "),a("li",[s._v("使用rossrv\n"),a("ul",[a("li",[s._v("用法："),a("code",[s._v("rossrv show <service type>")])]),s._v(" "),a("li",[s._v("Example"),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("// 带包名\nrossrv show beginner_tutorials/AddTwoInts\n// 不带报名\nrossrv show AddTwoInts\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])])])]),s._v(" "),a("h3",{attrs:{id:"msg和srv的一般步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#msg和srv的一般步骤"}},[s._v("#")]),s._v(" msg和srv的一般步骤")]),s._v(" "),a("p",[s._v("修改CMakeLists.txt")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("generate_messages(\n  DEPENDENCIES\n  # 取消注释，然后添加任意你的消息用到的包含.msg文件的软件包（本例中为std_msgs）\n  std_msgs\n)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("重新make软件包")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("roscd beginner_tutorials\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\ncatkin_make\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("msg目录中的任何.msg文件都将生成所有支持语言的代码。C++消息的头文件将生成在~/catkin_ws/devel/include/beginner_tutorials/。Python脚本将创建在~/catkin_ws/devel/lib/python2.7/dist-packages/beginner_tutorials/msg。而Lisp文件则出现在~/catkin_ws/devel/share/common-lisp/ros/beginner_tutorials/msg/。")]),s._v(" "),a("p",[s._v("类似地，srv目录中的任何.srv文件都将生成支持语言的代码。对于C++，头文件将生成在消息的头文件的同一目录中。对于Python和Lisp，会在msg目录旁边的srv目录中。")])]),a("h2",{attrs:{id:"录制和回放数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#录制和回放数据"}},[s._v("#")]),s._v(" 录制和回放数据")]),s._v(" "),a("ul",[a("li",[s._v("录制数据\n"),a("ul",[a("li",[s._v("录制所有话题 "),a("code",[s._v("rosbag record -a")])]),s._v(" "),a("li",[s._v("仅录制感兴趣的话题即数据子集 "),a("code",[s._v("rosbag record -O <bagfile_name> <topic1> <topic2>")])])])]),s._v(" "),a("li",[s._v("查看bag文件\n"),a("ul",[a("li",[s._v("查看所有话题的信息 "),a("code",[s._v("rosbag info <your bagfile>")])]),s._v(" "),a("li",[s._v("查看指定话题的信息 "),a("code",[s._v('rosbag info mybag.bag | grep -E "(topic1|topic2|topic3)"')])])])]),s._v(" "),a("li",[s._v("回放bag文件\n"),a("ul",[a("li",[a("code",[s._v("rosbag play <your bagfile>")])]),s._v(" "),a("li",[s._v("rosbag play命令在公告每条消息后会等待一小段时间（0.2秒）才真正开始发布bag文件中的内容，等待时间可以通过"),a("code",[s._v("-d")]),s._v("选项来指定")]),s._v(" "),a("li",[a("code",[s._v("-s")]),s._v(" 参数选项让rosbag play不从bag文件的开头开始，而是从某个指定的时间开始")]),s._v(" "),a("li",[a("code",[s._v("-r")]),s._v(" 选项允许通过设定一个参数来改变消息发布速率 如 "),a("code",[s._v("rosbag play -r 2 <your bagfile>")])]),s._v(" "),a("li",[a("code",[s._v("--immediate")]),s._v(" 尽可能快地回放bag文件")]),s._v(" "),a("li",[a("code",[s._v("--topics topic1 topic2 ... topicN")]),s._v(" 只回放感兴趣的话题")])])]),s._v(" "),a("li",[s._v("局限性"),a("br"),s._v("\nrosbag受制于其本身的性能无法完全复制录制时的系统运行行为，rosplay也一样。对于像turtlesim这样的节点，当处理消息的过程中系统定时发生极小变化时也会使其行为发生微妙变化，用户不应该期望能够完美地模仿系统行为。")]),s._v(" "),a("li",[s._v("从bag文件中读取所需话题的消息的两种方法\n"),a("ul",[a("li",[s._v("方法1：立即回放消息并在多个终端中查看输出"),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("roscore\n// 订阅topic1并复读该话题上发布的所有内容，同时用tee命令转储到一个yaml格式的文件中以便之后查看\nrostopic "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" /topic1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" topic1.yaml\n// 对其他你感兴趣的话题重复这一步骤，每个话题必须有自己的终端\nrostopic "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" /topic2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" topic2.yaml\n// 回放bag文件\nrosbag play "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--immediate")]),s._v(" demo.bag "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topics")]),s._v(" /topic1 /topic2\n// 在topic1.yaml和topic2.yaml中查看文件中的消息\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[s._v("方法2：使用ros_readbagfile脚本"),a("br"),s._v("\n1.下载并安装ros_readbag.py"),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下载脚本文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://raw.githubusercontent.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles/master/useful_scripts/ros_readbagfile.py\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 赋予执行权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x ros_readbagfile.py\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建bin路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" ~/bin\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将脚本放入bin文件夹中 并更改成ros_readbagfile的脚本名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" ros_readbagfile.py ~/bin/ros_readbagfile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# resource环境脚本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" ~/.bashrc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),s._v("2.通过rosbag_info命令确定要从bag文件中读取的准确话题名"),a("br"),s._v("\n3.使用ros_readbagfile\n"),a("ul",[a("li",[s._v("默认Python版本为Python3\n"),a("code",[s._v("ros_readbagfile <mybagfile.bag> [topic1] [topic2] [topic3] [...]")])]),s._v(" "),a("li",[s._v("默认Python版本为Python2\n"),a("code",[s._v("python ros_readbagfile.py <mybagfile.bag> [topic1] [topic2] [topic3] [...]")])]),s._v(" "),a("li",[s._v("Example"),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# python3")]),s._v("\nros_readbagfile ~/bagfiles/subset.bag /turtle1/cmd_vel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" subset.yaml\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# python2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://raw.githubusercontent.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles/master/useful_scripts/ros_readbagfile.py\npython ros_readbagfile.py ~/bagfiles/subset.bag /turtle1/cmd_vel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" subset.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])])]),s._v(" "),a("li",[s._v("对比\n"),a("ul",[a("li",[s._v("rostopic极慢，ros_readbagfile脚本较快")]),s._v(" "),a("li",[s._v("rostopic一次只能读取单个话题，而ros_readbagfile脚本可以同时读取任意多的话题")])])])])])]),s._v(" "),a("h2",{attrs:{id:"roswtf入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#roswtf入门"}},[s._v("#")]),s._v(" roswtf入门")]),s._v(" "),a("ul",[a("li",[s._v("用法："),a("code",[s._v("roswtf")]),s._v(" 可以检查你的系统并尝试发现问题")]),s._v(" "),a("li",[s._v("输出信息\n"),a("ul",[a("li",[s._v("package or stack in context")]),s._v(" "),a("li",[s._v("Static checks summary"),a("br"),s._v("\n报告任何关于文件系统或非运行时（比如无需roscore的场景）的问题")]),s._v(" "),a("li",[s._v("Online graph checks\n"),a("ul",[a("li",[s._v("roscore未运行时不会进行")]),s._v(" "),a("li",[s._v("roscore在运行时会进行ROS图的在线检查，检查过程的长短取决于正在运行的ROS节点数量")])])])])]),s._v(" "),a("li",[a("code",[s._v("roswtf")]),s._v(" 会对一些系统中看起来异常但可能是正常的运行情况发出警告，也会对确实有问题的情况报告错误"),a("br"),s._v("\nExample"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("roscd\nROS_PACKAGE_PATH=bad:$ROS_PACKAGE_PATH\nroswtf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),s._v("检查信息"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Stack: ros\n================================================================================\nStatic checks summary:\n\nFound 1 error(s).\n\nERROR Not all paths in ROS_PACKAGE_PATH [bad] point to an existing directory: \n * bad\n\n================================================================================\n\nCannot communicate with master, ignoring graph checks\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);